{
  "db_name": "PostgreSQL",
  "query": "\n            WITH next AS (\n                SELECT fse.event_id\n                FROM flow_system_events fse\n                LEFT JOIN flow_system_projected_events pe\n                    ON pe.projector = $1 AND pe.event_id = fse.event_id\n                WHERE pe.event_id IS NULL AND fse.event_id <= $2\n                ORDER BY fse.event_id\n                LIMIT $3\n            ),\n            merged as (\n                SELECT\n                    fse.event_id,\n                    fse.source_stream,\n                    fse.source_event_id,\n                    fse.occurred_at,\n                    fse.inserted_at,\n                    fe.event_payload\n                FROM flow_system_events fse\n                JOIN next n\n                    ON n.event_id = fse.event_id\n                JOIN flow_events fe\n                    ON fse.source_stream = 'flows'::flow_system_stream_type AND\n                        fe.event_id = fse.source_event_id\n\n                UNION ALL\n\n                SELECT\n                    fse.event_id,\n                    fse.source_stream,\n                    fse.source_event_id,\n                    fse.occurred_at,\n                    fse.inserted_at,\n                    fte.event_payload\n                FROM flow_system_events fse\n                JOIN next n\n                    ON n.event_id = fse.event_id\n                JOIN flow_trigger_events fte\n                    ON fse.source_stream = 'triggers'::flow_system_stream_type AND\n                        fte.event_id = fse.source_event_id\n\n                UNION ALL\n\n                SELECT\n                    fse.event_id,\n                    fse.source_stream,\n                    fse.source_event_id,\n                    fse.occurred_at,\n                    fse.inserted_at,\n                    fce.event_payload\n                FROM flow_system_events fse\n                JOIN next n\n                    ON n.event_id = fse.event_id\n                JOIN flow_configuration_events fce\n                    ON fse.source_stream = 'configurations'::flow_system_stream_type AND\n                        fce.event_id = fse.source_event_id\n            )\n            SELECT\n                event_id as \"event_id!\",\n                source_stream as \"source_stream!: String\",\n                source_event_id as \"source_event_id!\",\n                occurred_at as \"occurred_at!: DateTime<Utc>\",\n                inserted_at as \"inserted_at!: DateTime<Utc>\",\n                event_payload as \"event_payload!\"\n            FROM merged\n            ORDER BY event_id\n            ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "event_id!",
        "type_info": "Int8"
      },
      {
        "ordinal": 1,
        "name": "source_stream!: String",
        "type_info": {
          "Custom": {
            "name": "flow_system_stream_type",
            "kind": {
              "Enum": [
                "flows",
                "triggers",
                "configurations"
              ]
            }
          }
        }
      },
      {
        "ordinal": 2,
        "name": "source_event_id!",
        "type_info": "Int8"
      },
      {
        "ordinal": 3,
        "name": "occurred_at!: DateTime<Utc>",
        "type_info": "Timestamptz"
      },
      {
        "ordinal": 4,
        "name": "inserted_at!: DateTime<Utc>",
        "type_info": "Timestamptz"
      },
      {
        "ordinal": 5,
        "name": "event_payload!",
        "type_info": "Jsonb"
      }
    ],
    "parameters": {
      "Left": [
        "Text",
        "Int8",
        "Int8"
      ]
    },
    "nullable": [
      null,
      null,
      null,
      null,
      null,
      null
    ]
  },
  "hash": "70412888f97dacf948f0759bfc42bb59a9588a7e8f73c863c24a32df0e4e2e73"
}
