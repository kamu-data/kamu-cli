kind: DatasetSnapshot
version: 1
content:
  name: project-data-room
  kind: Root
  metadata:
  - kind: SetDataSchema
    schema:
      fields:
      - name: offset
        type:
          kind: Int64
      - name: op
        type:
          kind: Int32
      - name: system_time
        type:
          kind: Timestamp
          unit: Millisecond
          timezone: UTC
      - name: event_time
        type:
          kind: Timestamp
          unit: Millisecond
          timezone: UTC
      - name: path
        type:
          kind: String
        extra:
          opendatafabric.org/description: HTTP-like path to a collection entry. Paths start with `/` and can be nested, with individual path segments url-encoded (e.g. `/foo/bar%20baz`)
      - name: ref
        type:
          kind: String
        extra:
          opendatafabric.org/description: DID that references another dataset
          opendatafabric.org/type:
            kind: Did
      - name: molecule_change_by
        type:
          kind: Option
          inner:
            kind: String
      - name: molecule_access_level
        type:
          kind: Option
          inner:
            kind: String
      - name: content_type
        type:
          kind: Option
          inner:
            kind: String
      - name: content_hash
        type:
          kind: Option
          inner:
            kind: String
      - name: content_length
        type:
          kind: Option
          inner:
            kind: Int32
      - name: description
        type:
          kind: Option
          inner:
            kind: String
      - name: categories
        type:
          kind: Option
          inner:
            kind: List
            itemType:
              kind: Option
              inner:
                kind: String
      - name: tags
        type:
          kind: Option
          inner:
            kind: List
            itemType:
              kind: Option
              inner:
                kind: String
      - name: version
        type:
          kind: Option
          inner:
            kind: Int32
      extra:
        kamu.dev/archetype: Collection
  - kind: AddPushSource
    sourceName: default
    read:
      kind: NdJson
      schema:
      - op INT
      - path STRING
      - ref STRING
      - molecule_change_by STRING
      - molecule_access_level STRING
      - content_type STRING
      - content_hash STRING
      - content_length INT
      - description STRING
      - categories ARRAY<STRING>
      - tags ARRAY<STRING>
      - version INT
    merge:
      kind: ChangelogStream
      primaryKey:
      - path
